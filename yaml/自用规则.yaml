# ======= Clash / Stash 双分组覆写模板（主力手选 + 备用） =======
# 主力组：节点名包含 ix、bage、cf、jinx、aws(仅小写)、bero、bwh、Riddler、深港出口、出口
# 备用组：不包含以上关键词的节点
# 国内直连，国外走主力，广告拦截启用

proxy-groups:
  - name: 主力
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Auto.png
    include-all: true
    # 匹配 ix、bage、cf、jinx、aws(小写)、bero、bwh、Riddler、深港出口、出口
    # 注意 (?i) 忽略大小写匹配整体，但 (?!-AWS) 确保 AWS(全大写) 不被匹配
    filter: (?i)(ix|bage|cf|jinx|bero|bwh|riddler|深港出口|出口)|(?-i)aws

  - name: 备用
    type: select
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png
    include-all: true
    # 取反匹配主力
    filter: ^(?!.*((?i)(ix|bage|cf|jinx|bero|bwh|riddler|深港出口|出口)|(?-i)aws)).*
    proxies:
      - 主力
      - DIRECT

# ======= 规则集定义 =======
rule-providers:
  LocalAreaNetwork:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/LocalAreaNetwork.list
    path: ./ruleset/LocalAreaNetwork.list
    behavior: classical
    interval: 86400
    format: text
    type: http

  UnBan:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/UnBan.list
    path: ./ruleset/UnBan.list
    behavior: classical
    interval: 86400
    format: text
    type: http

  BanAD:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanAD.list
    path: ./ruleset/BanAD.list
    behavior: classical
    interval: 86400
    format: text
    type: http

  ChinaDomain:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaDomain.list
    path: ./ruleset/ChinaDomain.list
    behavior: domain
    interval: 86400
    format: text
    type: http

  ChinaCompanyIp:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaCompanyIp.list
    path: ./ruleset/ChinaCompanyIp.list
    behavior: ipcidr
    interval: 86400
    format: text
    type: http

# ======= 规则匹配顺序 =======
rules:
  - "RULE-SET,LocalAreaNetwork,DIRECT"
  - "RULE-SET,UnBan,DIRECT"
  - "RULE-SET,BanAD,REJECT"
  - "RULE-SET,ChinaDomain,DIRECT"
  - "RULE-SET,ChinaCompanyIp,DIRECT"
  - "GEOIP,CN,DIRECT"
  - "MATCH,主力"
